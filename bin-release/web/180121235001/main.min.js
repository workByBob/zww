var __reflect=this&&this.__reflect||function(t,e,n){t.__class__=e,n?n.push(e):n=[e],t.__types__=t.__types__?n.concat(t.__types__):n},__extends=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},Recharge=function(t){function e(){var e=t.call(this)||this;return e.closeBtn=null,e.scrollG=null,e.skinName="resource/skins/recharge.exml",e}return __extends(e,t),e.prototype.partAdded=function(e,n){t.prototype.partAdded.call(this,e,n),n==this.closeBtn&&n.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onButtonClick,this)},e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this);for(var e=0;6>e;e++){var n=new RechargeCell;n.y=e*n.height,this.scrollG.addChild(n)}},e.prototype.onButtonClick=function(t){switch(t.target){case this.closeBtn:this.parent.removeChild(this)}},e}(eui.Component);__reflect(Recharge.prototype,"Recharge",["eui.UIComponent","egret.DisplayObject"]);var AssetAdapter=function(){function t(){}return t.prototype.getAsset=function(t,e,n){function i(i){e.call(n,i,t)}if(RES.hasRes(t)){var o=RES.getRes(t);o?i(o):RES.getResAsync(t,i,this)}else RES.getResByUrl(t,i,this,RES.ResourceItem.TYPE_IMAGE)},t}();__reflect(AssetAdapter.prototype,"AssetAdapter",["eui.IAssetAdapter"]);var ChoiceWW=function(t){function e(){var e=t.call(this)||this;return e.scrollG=null,e.scroller=null,e.rdCheck=null,e.jbCheck=null,e.topBtn=null,e.skinName="resource/skins/choiceWW.exml",e}return __extends(e,t),e.prototype.partAdded=function(e,n){t.prototype.partAdded.call(this,e,n),(n==this.rdCheck||n==this.jbCheck)&&n.addEventListener(eui.UIEvent.CHANGE,this.onCheckBoxClick,this),n==this.topBtn&&n.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onButtonClick,this),n==this.scroller&&(n.addEventListener(eui.UIEvent.CHANGE_END,this.onScroll,this),n.addEventListener(eui.UIEvent.CHANGE_START,this.onScroll,this))},e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),Data.wawaJson=RES.getRes("wwInfo_json"),this.checkBoxByTarget(this.rdCheck)},e.prototype.updateScroll=function(t){this.scrollG.removeChildren(),this.scroller.stopAnimation(),this.scroller.viewport.scrollV=0,this.topBtn.visible=!1;var e=new eui.ArrayCollection(Data.wawaJson.wawa),n=e.length,i=new eui.ArrayCollection;if(0==t){for(var o=0;n>o;o++)if(0==o&&i.addItem(e.getItemAt(o)),n>o+1)for(var a=0;a<i.length;a++){if(e.getItemAt(o+1).hot>=i.getItemAt(a).hot){i.addItemAt(e.getItemAt(o+1),a);break}i.addItemAt(e.getItemAt(o+1),i.length);break}}else if(1==t)for(var o=0;n>o;o++)if(0==o&&i.addItem(e.getItemAt(o)),n>o+1)for(var a=0;a<i.length;a++){if(e.getItemAt(o+1).cost>=i.getItemAt(a).cost){i.addItemAt(e.getItemAt(o+1),a);break}i.addItemAt(e.getItemAt(o+1),i.length);break}for(var o=0;o<i.length;o++){var r=new ChoiceWWCell(i.getItemAt(o));r.y=o*r.height,this.scrollG.addChild(r)}},e.prototype.onCheckBoxClick=function(t){this.rdCheck.selected=!1,this.jbCheck.selected=!1,this.checkBoxByTarget(t.target)},e.prototype.checkBoxByTarget=function(t){switch(t){case this.rdCheck:this.rdCheck.selected=!0,this.updateScroll(0);break;case this.jbCheck:this.jbCheck.selected=!0,this.updateScroll(1)}},e.prototype.onButtonClick=function(t){switch(t.target){case this.topBtn:this.scroller.stopAnimation(),this.scroller.viewport.scrollV=0;var e=this;egret.Tween.get(this.topBtn,{loop:!1}).to({y:960+this.topBtn.height},500).call(function(){e.topBtn.visible=!1})}},e.prototype.onScroll=function(t){switch(t.type){case"changeStart":var e=this;egret.Tween.get(this.topBtn,{loop:!1}).to({y:960+this.topBtn.height},500).call(function(){e.topBtn.visible=!1});break;case"changeEnd":this.scroller.viewport.scrollV>0&&(this.topBtn.visible=!0,egret.Tween.get(this.topBtn,{loop:!1}).to({y:960-2*this.topBtn.height},500))}},e}(eui.Component);__reflect(ChoiceWW.prototype,"ChoiceWW",["eui.UIComponent","egret.DisplayObject"]);var ChoiceWWCell=function(t){function e(e){var n=t.call(this)||this;return n.choiceBtn=null,n.idLabel=null,n.nameLabel=null,n.colorLabel=null,n.sizeLabel=null,n.costLabel=null,n.wawaImg=null,n._data=null,n._data=e,n.skinName="resource/skins/choiceWWCell.exml",n}return __extends(e,t),e.prototype.partAdded=function(e,n){t.prototype.partAdded.call(this,e,n),n==this.choiceBtn&&n.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onButtonClick,this),n==this.idLabel&&(n.text=this._data.id),n==this.nameLabel&&(n.text=this._data.name),n==this.colorLabel&&(n.text=this._data.color),n==this.sizeLabel&&(n.text=this._data.size),n==this.costLabel&&(n.text=this._data.cost),n==this.wawaImg&&(n.texture=RES.getRes(this._data.id+"_png"))},e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this)},e.prototype.onButtonClick=function(t){switch(t.target){case this.choiceBtn:Data.selectData=this._data,AppCanvas.setGameState(3);var e=AppCanvas.getChildByName("choice");e&&egret.Tween.get(e,{loop:!1}).to({x:-e.width},300).call(function(){AppCanvas.removeChild(e)})}},e}(eui.Component);__reflect(ChoiceWWCell.prototype,"ChoiceWWCell",["eui.UIComponent","egret.DisplayObject"]);var EverydayGift=function(t){function e(){var e=t.call(this)||this;return e.closeBtn=null,e.skinName="resource/skins/loginGift.exml",e}return __extends(e,t),e.prototype.partAdded=function(e,n){t.prototype.partAdded.call(this,e,n),n==this.closeBtn&&n.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onButtonClick,this)},e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this)},e.prototype.onButtonClick=function(t){switch(t.target){case this.closeBtn:this.parent.removeChild(this)}},e}(eui.Component);__reflect(EverydayGift.prototype,"EverydayGift",["eui.UIComponent","egret.DisplayObject"]);var GameLayer=function(t){function e(){var e=t.call(this)||this;e.startBtn=null,e.changeBtn=null,e.wechatBtn=null,e.giftBtn=null,e.invateBtn=null,e.kefuBtn=null,e.payBtn=null,e.taskBtn=null,e.showBtn=null,e.bagBtn=null,e.lightGroup=null,e.wawaInfoBtn=null,e.noticeLabel=null,e.showGroup=null,e.wawa01=null,e.wawa02=null,e.wawa03=null,e.wawa04=null,e.wawa05=null,e.wawaArray=[],e.startGroup=null,e.prizeLabel=null,e.playGroup=null,e.scoreText=null,e.leftBtn=null,e.rightBtn=null,e.upBtn=null,e.downBtn=null,e.goBtn=null,e.hand=null,e.isTouch=!1,e.handSpeedX=0,e.handSpeedY=0,e.nameText=null,e.pointX=0,e.pointY=0;var n=new egret.Timer(10,0);return n.addEventListener(egret.TimerEvent.TIMER,e.timerFunc,e),n.addEventListener(egret.TimerEvent.TIMER_COMPLETE,e.timerComFunc,e),n.start(),e.addEventListener(eui.UIEvent.COMPLETE,e.uiCompHandler,e),e.skinName="resource/skins/gameLayer.exml",e.hand=new Hand,e.showGroup.addChild(e.hand),e}return __extends(e,t),e.prototype.uiCompHandler=function(){console.log(" 进来了 。。。");var t=new egret.MovieClipDataFactory(RES.getRes("lightAction_json"),RES.getRes("lightAction_png")),e=new egret.MovieClip(t.generateMovieClipData("buling"));this.lightGroup.addChild(e),e.gotoAndPlay("action",-1),this.prizeLabel.text=Data.selectData.cost,this.setGameScore(Data.cmd_userInfo.userCoin),this.showNotice("欢迎来到 就爱抓娃娃 房间～")},e.prototype.showNotice=function(t){this.noticeLabel.text=t;var e=this.noticeLabel.width;egret.Tween.get(this.noticeLabel,{loop:!0}).to({x:640},0).to({x:-e},1e4)},e.prototype.partAdded=function(e,n){t.prototype.partAdded.call(this,e,n),(n==this.startBtn||n==this.changeBtn||n==this.wechatBtn||n==this.giftBtn||n==this.invateBtn||n==this.kefuBtn||n==this.payBtn||n==this.taskBtn||n==this.showBtn||n==this.bagBtn||n==this.goBtn||n==this.wawaInfoBtn)&&n.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onButtonClick,this),(n==this.leftBtn||n==this.rightBtn||n==this.upBtn||n==this.downBtn)&&(n.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onButtonTouch,this),n.addEventListener(egret.TouchEvent.TOUCH_END,this.onButtonTouch,this),n.addEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,this.onButtonTouch,this)),n==this.nameText&&(this.nameText.text=Data.weChat_name),(n==this.wawa01||n==this.wawa02||n==this.wawa03||n==this.wawa04||n==this.wawa05)&&(n.texture=RES.getRes(Data.selectData.id+"_png"),this.wawaArray.push(n))},e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this)},e.prototype.timerFunc=function(){if(this.isTouch){this.hand.x=this.hand.x+this.handSpeedX,this.hand.y=this.hand.y+this.handSpeedY,this.hand.x<0&&(this.hand.x=0),this.hand.x>this.showGroup.width-93&&(this.hand.x=this.showGroup.width-93),this.hand.y>0&&(this.hand.y=0),this.hand.y<-70&&(this.hand.y=-70);var t=this.hand.y+534;t<this.wawaArray[4].y&&t>this.wawaArray[0].y?this.showGroup.setChildIndex(this.hand,4):this.showGroup.setChildIndex(this.hand,5),t<this.wawaArray[0].y?this.showGroup.setChildIndex(this.hand,1):this.showGroup.setChildIndex(this.hand,4),Data.onWawaIndex=-1;for(var e=0;e<this.wawaArray.length;e++)1==this.wawaArray[e].visible&&Utils.isCheckCollide(new egret.Point(this.hand.x+47,t),new egret.Rectangle(this.wawaArray[e].x-25,this.wawaArray[e].y-15,50,30))&&(Data.onWawaIndex=e)}},e.prototype.timerComFunc=function(){console.log("计时结束")},e.prototype.onButtonTouch=function(t){if(console.log(t.type),t.type==egret.TouchEvent.TOUCH_BEGIN)switch(this.isTouch=!0,t.target){case this.upBtn:this.handSpeedY=-.5;break;case this.downBtn:this.handSpeedY=.5;break;case this.leftBtn:this.handSpeedX=-1,this.hand.moveAction("left");break;case this.rightBtn:this.handSpeedX=1,this.hand.moveAction("right")}else{this.isTouch=!1,this.handSpeedX=0,this.handSpeedY=0;var e=this;egret.Tween.get(this.hand,{loop:!1}).wait(150).call(function(){e.hand.moveAction("none")})}},e.prototype.onButtonClick=function(t){switch(t.target){case this.startBtn:this.getGameScore()>=Data.selectData.cost?(this.startGroup.visible=!1,this.playGroup.visible=!0,Utils.sendHttpServer("http://wawa.sz-ayx.com/api/winnig/index/userkey/"+Data.userKey+"/giftkey/"+Data.selectData.id,function(t){WaitConnect.closeConnect();var e=t.currentTarget;console.log("winnig data : ",e.response),Data.cmd_winnig=JSON.parse(e.response)},this)):this.addChild(new Recharge);break;case this.bagBtn:var e=new Bag;this.addChild(e);break;case this.payBtn:this.addChild(new Recharge);break;case this.taskBtn:var n=new Task;this.addChild(n);break;case this.goBtn:this.checkDirBtnStype(!1);var i=this,o=null;this.hand.playAction(function(t){if(0==t)egret.Tween.get(i.hand,{loop:!1}).to({x:0,y:0},400).call(function(){i.checkDirBtnStype(!0),i.startGroup.visible=!0,i.playGroup.visible=!1,1==Data.cmd_winnig.state&&null!=o&&(console.log("提示抓到娃娃了"),egret.Tween.get(o,{loop:!1}).to({y:o.y+225,alpha:0},200).call(function(){o.parent.removeChild(o),o=null}))});else if(2==t){var e=i.wawaArray[Data.onWawaIndex];egret.Tween.get(e,{loop:!1}).to({y:e.y-20},100).to({y:e.y},100)}else 1==t&&(i.wawaArray[Data.onWawaIndex].visible=!1,null==o&&(o=new eui.Image(RES.getRes(Data.selectData.id+"_png")),o.y=i.hand.shadow.y,o.x=-20,o.scaleX=.4,o.scaleY=.4,o.anchorOffsetX=o.width/2,o.anchorOffsetY=280,i.hand.addChild(o),egret.Tween.get(o,{loop:!1}).to({y:o.y-225},800)))});break;case this.changeBtn:AppCanvas.setGameState(2);break;case this.showBtn:var a=new Show;this.addChild(a);break;case this.wawaInfoBtn:var r=new Info;this.addChild(r)}},e.prototype.checkDirBtnStype=function(t){this.upBtn.touchEnabled=t,this.downBtn.touchEnabled=t,this.leftBtn.touchEnabled=t,this.rightBtn.touchEnabled=t,this.goBtn.touchEnabled=t},e.prototype.setGameScore=function(t){Data.cmd_userInfo.userCoin=t,this.scoreText.text=t},e.prototype.getGameScore=function(){return Data.cmd_userInfo.userCoin},e}(eui.Component);__reflect(GameLayer.prototype,"GameLayer",["eui.UIComponent","egret.DisplayObject"]);var Hand=function(t){function e(){var e=t.call(this)||this;return e.handL=null,e.handR=null,e.shadow=null,e.handArm=null,e.skinName="resource/skins/hand.exml",e}return __extends(e,t),e.prototype.partAdded=function(e,n){t.prototype.partAdded.call(this,e,n),n==this.shadow},e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this)},e.prototype.moveAction=function(t){"left"==t&&(egret.Tween.get(this.handL,{loop:!1}).to({rotation:-30},150,egret.Ease.circOut),egret.Tween.get(this.handR,{loop:!1}).to({rotation:-30},150,egret.Ease.circOut)),"right"==t&&(egret.Tween.get(this.handL,{loop:!1}).to({rotation:30},150,egret.Ease.circOut),egret.Tween.get(this.handR,{loop:!1}).to({rotation:30},150,egret.Ease.circOut)),"none"==t&&(egret.Tween.get(this.handL,{loop:!1}).to({rotation:0},100),egret.Tween.get(this.handR,{loop:!1}).to({rotation:0},100))},e.prototype.playAction=function(t){var e=this;egret.Tween.get(this.handArm,{loop:!1}).to({y:240},1500).call(function(){-1==Data.onWawaIndex?(egret.Tween.get(this,{loop:!1}).to({y:0},800).call(function(){t(0)}),egret.Tween.get(e.handL,{loop:!1}).to({rotation:0},150,egret.Ease.circOut),egret.Tween.get(e.handR,{loop:!1}).to({rotation:0},150,egret.Ease.circOut)):2==Data.cmd_winnig.state?(t(2),egret.Tween.get(this,{loop:!1}).to({y:0},800).call(function(){t(0)}),egret.Tween.get(e.handL,{loop:!1}).to({rotation:0},150,egret.Ease.circOut),egret.Tween.get(e.handR,{loop:!1}).to({rotation:0},150,egret.Ease.circOut)):1==Data.cmd_winnig.state&&(t(1),egret.Tween.get(this,{loop:!1}).to({y:0},800).call(function(){t(0)}),egret.Tween.get(e.handL,{loop:!1}).to({rotation:0},150,egret.Ease.circOut),egret.Tween.get(e.handR,{loop:!1}).to({rotation:0},150,egret.Ease.circOut))}),egret.Tween.get(this.handL,{loop:!1}).to({rotation:30},150,egret.Ease.circOut),egret.Tween.get(this.handR,{loop:!1}).to({rotation:-30},150,egret.Ease.circOut)},e}(eui.Component);__reflect(Hand.prototype,"Hand",["eui.UIComponent","egret.DisplayObject"]);var Info=function(t){function e(){var e=t.call(this)||this;return e.closeBtn=null,e.zqCheck=null,e.wwCheck=null,e.scrollG=null,e.wawaGroup=null,e.wawa=null,e.idText=null,e.nameText=null,e.colorText=null,e.sizeText=null,e.weightText=null,e.skinName="resource/skins/info.exml",e}return __extends(e,t),e.prototype.partAdded=function(e,n){t.prototype.partAdded.call(this,e,n),n==this.closeBtn&&n.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onButtonClick,this),(n==this.zqCheck||n==this.wwCheck)&&n.addEventListener(eui.UIEvent.CHANGE,this.onCheckBoxClick,this)},e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),this.checkBoxByTarget(this.zqCheck)},e.prototype.onCheckBoxClick=function(t){this.zqCheck.selected=!1,this.wwCheck.selected=!1,this.checkBoxByTarget(t.target)},e.prototype.checkBoxByTarget=function(t){switch(this.wawaGroup.visible=!1,t){case this.zqCheck:this.zqCheck.selected=!0;break;case this.wwCheck:this.wwCheck.selected=!0,this.wawaGroup.visible=!0,this.wawa.texture=RES.getRes(Data.selectData.id+"_png"),this.idText.text=Data.selectData.id,this.nameText.text=Data.selectData.name,this.colorText.text=Data.selectData.color,this.sizeText.text=Data.selectData.size,this.weightText.text=Data.selectData.weight}},e.prototype.onButtonClick=function(t){switch(t.target){case this.closeBtn:this.parent.removeChild(this)}},e}(eui.Component);__reflect(Info.prototype,"Info",["eui.UIComponent","egret.DisplayObject"]);var LoadingUI=function(t){function e(){var e=t.call(this)||this;return e.loadBg=null,e.loadBar=null,e.loadNum=null,e.loadHead=null,e.isThemeLoadEnd=!1,e.isResourceLoadEnd=!1,e.skinName="resource/skins/load.exml",e.addEventListener(eui.UIEvent.COMPLETE,e.uiCompHandler,e),e}return __extends(e,t),e.prototype.partAdded=function(e,n){t.prototype.partAdded.call(this,e,n),n==this.loadHead&&egret.Tween.get(n,{loop:!0}).to({rotation:360},1e3)},e.prototype.setProgress=function(t,e){var n=Math.floor(t*(100/e));this.loadNum.text=""+n+"%",this.loadNum.anchorOffsetX=this.loadNum.width/2,this.loadBar&&(this.loadBar.width=458/e*t,this.loadHead.x=this.loadBar.width+this.loadHead.width/2)},e.prototype.uiCompHandler=function(){var t=new eui.Theme("resource/default.thm.json",this.stage);t.addEventListener(eui.UIEvent.COMPLETE,this.onThemeLoadComplete,this),RES.addEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.addEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadError,this),RES.addEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceProgress,this),RES.addEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,this.onItemLoadError,this),RES.loadGroup("preload")},e.prototype.onThemeLoadComplete=function(){this.isThemeLoadEnd=!0,this.createScene()},e.prototype.onResourceLoadComplete=function(t){"preload"==t.groupName&&(RES.removeEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.removeEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadError,this),RES.removeEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceProgress,this),RES.removeEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,this.onItemLoadError,this),this.isResourceLoadEnd=!0,this.createScene())},e.prototype.createScene=function(){this.isThemeLoadEnd&&this.isResourceLoadEnd&&(RES.destroyRes("loading"),AppCanvas.setGameState(2))},e.prototype.onItemLoadError=function(t){console.warn("Url:"+t.resItem.url+" has failed to load")},e.prototype.onResourceLoadError=function(t){console.warn("Group:"+t.groupName+" has failed to load"),this.onResourceLoadComplete(t)},e.prototype.onResourceProgress=function(t){"preload"==t.groupName&&this.setProgress(t.itemsLoaded,t.itemsTotal)},e}(eui.Component);__reflect(LoadingUI.prototype,"LoadingUI",["eui.UIComponent","egret.DisplayObject"]);var AppCanvas=null,Main=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.createChildren=function(){t.prototype.createChildren.call(this),AppCanvas=this;var e=new AssetAdapter;egret.registerImplementation("eui.IAssetAdapter",e),egret.registerImplementation("eui.IThemeAdapter",new ThemeAdapter);var n=!0;if(Utils.isWeiXin()&&n){var i=Utils.getArgsValue(Utils.getCurrHref(),"code");if(""!=i){var o="http://wawa.sz-ayx.com/index.php/wap/Unionid/index?code="+i,a=new egret.HttpRequest;a.responseType=egret.HttpResponseType.TEXT,a.open(o,egret.HttpMethod.GET),a.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),a.send(),a.addEventListener(egret.Event.COMPLETE,this.wxListenerFun,this)}else{var o=encodeURIComponent(location.href.split("#")[0]);location.href="https://open.weixin.qq.com/connect/oauth2/authorize?appid=wxdfb3530f672883c1&redirect_uri="+o+"&response_type=code&scope=snsapi_userinfo&state=STATE#wechat_redirect "}}else this.openNextStep()},e.prototype.wxListenerFun=function(t){var e=t.currentTarget;console.log("login get data : ",e.response),this.wxLogin=JSON.parse(e.response),Data.weChat_name=this.wxLogin.nickname,Data.weChat_headUrl=this.wxLogin.headimgurl,Data.weChat_openid=this.wxLogin.openid,Data.userKey=this.wxLogin.userkey,this.openNextStep()},e.prototype.openNextStep=function(){new WebSocketExample,RES.addEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigComplete,this),RES.loadConfig("resource/default.res.json","resource/")},e.prototype.onConfigComplete=function(t){if(RES.removeEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigComplete,this),RES.loadGroup("loading",1),Utils.isWeiXin()){var e="http://wawa.sz-ayx.com/index.php/wap/Unionid/jssign?url="+encodeURIComponent(location.href.split("#")[0]),n=new egret.HttpRequest;n.responseType=egret.HttpResponseType.TEXT,n.open(e,egret.HttpMethod.GET),n.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),n.send(),n.addEventListener(egret.Event.COMPLETE,this.wxTicketListenerFun,this)}Utils.sendHttpServer("http://wawa.sz-ayx.com/api/userInfo/index/userkey/"+Data.userKey,function(t){WaitConnect.closeConnect();var e=t.currentTarget;console.log("userInfo data : ",e.response),Data.cmd_userInfo=JSON.parse(e.response),this.setGameState(1)},this)},e.prototype.setGameState=function(t){switch(2!=this.gameState&&this.removeChildren(),this.gameState=t,t){case 1:this.loadingView=new LoadingUI,this.addChild(this.loadingView);break;case 2:var e=new ChoiceWW;this.addChild(e),e.name="choice";break;case 3:this.gameLayer=new GameLayer,this.gameLayer.x=this.gameLayer.width,this.addChild(this.gameLayer),egret.Tween.get(this.gameLayer,{loop:!1}).to({x:0},300);break;case 4:}},e.prototype.wxTicketListenerFun=function(t){var e=t.currentTarget;this.signpackage=JSON.parse(e.response),console.log(this.signpackage.nonceStr+" "+this.signpackage.timestamp+"  "+this.signpackage.signature),this.getWeChatConfig(),wx.ready(function(){AppCanvas.checkShareWord()})},e.prototype.getWeChatConfig=function(){var t=new BodyConfig;t.debug=!1,t.appId=Data.wx_appId,t.timestamp=this.signpackage.timestamp,t.nonceStr=this.signpackage.nonceStr,t.signature=this.signpackage.signature,t.jsApiList=["checkJsApi","onMenuShareTimeline","onMenuShareAppMessage","onMenuShareQQ","onMenuShareWeibo","hideMenuItems","showMenuItems","hideAllNonBaseMenuItem","showAllNonBaseMenuItem","translateVoice","startRecord","stopRecord","playVoice","pauseVoice","stopVoice","uploadVoice","downloadVoice","chooseImage","previewImage","uploadImage","downloadImage","getNetworkType","openLocation","getLocation","hideOptionMenu","showOptionMenu","closeWindow","scanQRCode","chooseWXPay","openProductSpecificView","addCard","chooseCard","openCard"],wx.config(t)},e.prototype.checkShareWord=function(){var t=encodeURIComponent(location.href.split("#")[0]);this.link=t,this.title="就爱夹娃娃",this.desc="抓娃娃高手",this.imgUrl=Data.weChat_headUrl,this.getWeChatShareTimeLine(),this.getWEChatShareAppMessage()},e.prototype.getWeChatShareTimeLine=function(){var t=new BodyMenuShareTimeline;t.title=this.title,t.link=this.link,t.imgUrl=this.imgUrl,t.trigger=function(t){alert("用户点击分享到朋友圈")},t.success=function(t){alert("已分享")},t.cancel=function(t){alert("已取消")},t.fail=function(t){alert(JSON.stringify(t)+" bodyMenuShareTimeLine")},wx.onMenuShareTimeline(t)},e.prototype.getWEChatShareAppMessage=function(){var t=new BodyMenuShareAppMessage;t.title=this.title,t.desc=this.desc,t.link=this.link,t.imgUrl=this.imgUrl,t.type="link",t.dataUrl="",t.trigger=function(t){alert("用户点击发送给朋友")},t.success=function(t){alert("已分享")},t.cancel=function(t){alert("已取消")},t.fail=function(t){alert(JSON.stringify(t)+" bodyMenuShareAppMessage")},wx.onMenuShareAppMessage(t)},e.prototype.createBitmapByName=function(t){var e=new egret.Bitmap,n=RES.getRes(t);return e.texture=n,e},e}(eui.UILayer);__reflect(Main.prototype,"Main");var PhotoClip=function(t){function e(e,n){var i=t.call(this)||this;return i.sureBtn=null,i.scrollG=null,i.mBmp=null,i.imageGroup=null,i._texture=null,i._callback=null,i.rect=null,i.touchX=0,i.touchY=0,i.isTouch=!1,i._texture=e,i._callback=n,i.addEventListener(eui.UIEvent.COMPLETE,i.uiCompHandler,i),i.skinName="resource/skins/photoClip.exml",i}return __extends(e,t),e.prototype.partAdded=function(e,n){t.prototype.partAdded.call(this,e,n),n==this.sureBtn&&n.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onButtonClick,this),n==this.rect&&(n.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onTouch,this),n.addEventListener(egret.TouchEvent.TOUCH_MOVE,this.onTouch,this),n.addEventListener(egret.TouchEvent.TOUCH_END,this.onTouch,this),n.addEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,this.onTouch,this))},e.prototype.uiCompHandler=function(){this.mBmp=new egret.Bitmap,this.imageGroup.addChild(this.mBmp),this.mBmp.texture=this._texture,this.mBmp.x=this.rect.x,this.mBmp.y=this.rect.y;var t=300/this.mBmp.width,e=300/this.mBmp.height,n=new egret.RenderTexture;this.mBmp.width>=this.mBmp.height?(this.mBmp.height=this.mBmp.height*e,this.mBmp.width=this.mBmp.width*e,this.mBmp.x=this.rect.x-(this.mBmp.width-300)/2,n.drawToTexture(this.mBmp,new egret.Rectangle(this.rect.x-this.mBmp.x,0,300,300))):(this.mBmp.height=this.mBmp.height*t,this.mBmp.width=this.mBmp.width*t,this.mBmp.y=this.rect.y-(this.mBmp.height-300)/2,n.drawToTexture(this.mBmp,new egret.Rectangle(0,this.rect.y-this.mBmp.y,300,300))),this._texture=n},e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this)},e.prototype.onButtonClick=function(t){switch(t.target){case this.sureBtn:this.parent.removeChild(this),this._callback(this._texture)}},e.prototype.onTouch=function(t){if(t.type==egret.TouchEvent.TOUCH_BEGIN)this.touchX=t.localX,this.touchY=t.localY,this.isTouch=!0;else if(t.type==egret.TouchEvent.TOUCH_MOVE){if(!this.isTouch)return;this.mBmp.x+=t.localX-this.touchX,this.mBmp.y+=t.localY-this.touchY,this.touchX=t.localX,this.touchY=t.localY,this.mBmp.x>=this.rect.x&&(this.mBmp.x=this.rect.x),this.mBmp.x+this.mBmp.width<=this.rect.x+this.rect.width&&(this.mBmp.x=this.rect.x-(this.mBmp.width-this.rect.width)),this.mBmp.y>=this.rect.y&&(this.mBmp.y=this.rect.y),this.mBmp.y+this.mBmp.height<=this.rect.y+this.rect.height&&(this.mBmp.y=this.rect.y-(this.mBmp.height-this.rect.height))}else this.isTouch=!1},e}(eui.Component);__reflect(PhotoClip.prototype,"PhotoClip",["eui.UIComponent","egret.DisplayObject"]);var Bag=function(t){function e(){var e=t.call(this)||this;return e.closeBtn=null,e.tqCheck=null,e.yyCheck=null,e.scrollG=null,e.skinName="resource/skins/bag.exml",e}return __extends(e,t),e.prototype.partAdded=function(e,n){t.prototype.partAdded.call(this,e,n),n==this.closeBtn&&n.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onButtonClick,this),(n==this.tqCheck||n==this.yyCheck)&&n.addEventListener(eui.UIEvent.CHANGE,this.onCheckBoxClick,this)},e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),this.checkBoxByTarget(this.tqCheck)},e.prototype.onCheckBoxClick=function(t){this.tqCheck.selected=!1,this.yyCheck.selected=!1,this.checkBoxByTarget(t.target)},e.prototype.checkBoxByTarget=function(t){switch(t){case this.tqCheck:this.tqCheck.selected=!0;break;case this.yyCheck:this.yyCheck.selected=!0}},e.prototype.onButtonClick=function(t){switch(t.target){case this.closeBtn:this.parent.removeChild(this)}},e}(eui.Component);__reflect(Bag.prototype,"Bag",["eui.UIComponent","egret.DisplayObject"]);var RechargeCell=function(t){function e(){var e=t.call(this)||this;return e.coinsText=null,e.payText=null,e.buyBtn=null,e.skinName="resource/skins/rechargeCell.exml",e}return __extends(e,t),e.prototype.partAdded=function(e,n){t.prototype.partAdded.call(this,e,n),n==this.buyBtn&&n.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onButtonClick,this),n==this.coinsText&&(this.coinsText.text="100金币"),n==this.payText&&(this.payText.text="9.9元",this.payText.anchorOffsetX=this.payText.width/2,this.payText.x=this.buyBtn.x)},e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this)},e.prototype.onButtonClick=function(t){switch(t.target){case this.buyBtn:}},e}(eui.Component);__reflect(RechargeCell.prototype,"RechargeCell",["eui.UIComponent","egret.DisplayObject"]);var Show=function(_super){function Show(){var t=_super.call(this)||this;return t.closeBtn=null,t.editText=null,t.ciBtn=null,t.showWrite=null,t.showAll=null,t.cellMaxNum=0,t.scrollerShow=null,t.imgScroller=null,t.publishBtn=null,t.showMyself=null,t.sureBtn=null,t.mBmp=null,t.addEventListener(eui.UIEvent.COMPLETE,t.uiCompHandler,t),t.skinName="resource/skins/show.exml",t}return __extends(Show,_super),Show.prototype.partAdded=function(t,e){_super.prototype.partAdded.call(this,t,e),(e==this.closeBtn||e==this.ciBtn||e==this.sureBtn||e==this.publishBtn)&&e.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onButtonClick,this),e==this.scrollerShow&&e.addEventListener(eui.UIEvent.CHANGE_END,this.onScroll,this)},Show.prototype.childrenCreated=function(){_super.prototype.childrenCreated.call(this)},Show.prototype.onScroll=function(t){switch(t.type){case"changeEnd":this.scrollerShow.viewport.scrollV>=300*this.cellMaxNum-400&&this.sendGetAllShowCommond()}},Show.prototype.setShowState=function(t){this.showAll.visible=!1,this.showWrite.visible=!1,this.showMyself.visible=!1,t.visible=!0},Show.prototype.uiCompHandler=function(){this.setShowState(this.showAll),this.sendGetAllShowCommond()},Show.prototype.sendGetAllShowCommond=function(){Utils.sendHttpServer("http://wawa.sz-ayx.com//api/Beautiful/Beautiful/userkey/"+Data.userKey,function(e){WaitConnect.closeConnect();var request=e.currentTarget,data=JSON.parse(request.response);if(1==data.state){Data.cmd_pictures=eval(data.data);for(var size=Data.cmd_pictures.length,i=0;size>i;i++){var cell=new ShowCell(Data.cmd_pictures[i]);cell.y=300*this.cellMaxNum+300*i,this.imgScroller.addChild(cell)}this.cellMaxNum+=size}else alert("error 返回玩家秀信息失败")},this)},Show.prototype.onButtonClick=function(t){switch(t.target){case this.closeBtn:this.parent.removeChild(this);break;case this.ciBtn:UploadImageTool.showChoose(this.onData,this);break;case this.sureBtn:var e=this.mBmp,n=new egret.RenderTexture;n.drawToTexture(e,new egret.Rectangle(0,0,e.width,e.height));var i=n.toDataURL("image/jpeg");if(console.log(i),null==this.mBmp)return void alert("没有上传自己和娃娃的美照～");if(""==this.editText.text||this.editText.text.length<30)return void alert("请输入不少于30字的玩家秀内容");Utils.sendHttpPostServer("http://wawa.sz-ayx.com/api/Beautiful/index/userkey/"+Data.userKey+"/contens/"+this.editText.text,i,function(t){var e=t.currentTarget;console.log("Beautiful data : ",e.response)},this);break;case this.publishBtn:this.setShowState(this.showWrite)}},Show.prototype.onData=function(t){Data.textureHead=t,this.drawTextureHead()},Show.prototype.drawTextureHead=function(){var t=this;AppCanvas.addChild(new PhotoClip(Data.textureHead,function(e){null!=t.mBmp&&(t.mBmp.parent.removeChild(t.mBmp),t.mBmp=null),t.mBmp=new egret.Bitmap,t.showWrite.addChild(t.mBmp),t.mBmp.texture=e,t.mBmp.x=t.ciBtn.x,t.mBmp.y=t.ciBtn.y,t.ciBtn.visible=!1,t.ciBtn.touchEnabled=!1;var n=50/t.mBmp.width;t.mBmp.width=n*t.mBmp.width,t.mBmp.height*=n}))},Show}(eui.Component);__reflect(Show.prototype,"Show",["eui.UIComponent","egret.DisplayObject"]);var ShowCell=function(t){function e(e){var n=t.call(this)||this;return n.descLabel=null,n.nameLabel=null,n.time=null,n.img=null,n._cellData=null,n._cellData=e,n.addEventListener(eui.UIEvent.COMPLETE,n.uiCompHandler,n),n.skinName="resource/skins/showCell.exml",n}return __extends(e,t),e.prototype.partAdded=function(e,n){t.prototype.partAdded.call(this,e,n)},e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this)},e.prototype.uiCompHandler=function(){var t=this;this.descLabel.text=this._cellData.contens,this.descLabel.width=270,this.descLabel.height=50,this.descLabel.wordWrap=!0,this.nameLabel.text=this._cellData.uid,this.nameLabel.anchorOffsetX=this.nameLabel.width/2,this.time.text=Utils.getLocalTime(this._cellData.addtime),this.time.anchorOffsetX=this.time.width;var e=document.createElement("img");e.src=this._cellData.img,e.onload=function(){var n=new egret.Texture,i=new egret.BitmapData(e);n.bitmapData=i;var o=new egret.Bitmap(n);o.y=t.img.y,o.x=t.img.x,t.addChild(o);var a=t.img.width/o.width;o.width*=a,o.height*=a}},e}(eui.Component);__reflect(ShowCell.prototype,"ShowCell",["eui.UIComponent","egret.DisplayObject"]);var Task=function(t){function e(){var e=t.call(this)||this;return e.closeBtn=null,e.scrollG=null,e.skinName="resource/skins/task.exml",e}return __extends(e,t),e.prototype.partAdded=function(e,n){t.prototype.partAdded.call(this,e,n),n==this.closeBtn&&n.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onButtonClick,this)},e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this);for(var e=0;10>e;e++){var n=new TaskCell;n.y=e*n.height,this.scrollG.addChild(n)}},e.prototype.onButtonClick=function(t){switch(t.target){case this.closeBtn:this.parent.removeChild(this)}},e}(eui.Component);__reflect(Task.prototype,"Task",["eui.UIComponent","egret.DisplayObject"]);var TaskCell=function(t){function e(){var e=t.call(this)||this;return e.receiveBtn=null,e.taskDesc=null,e.taskReward=null,e.taskType=null,e.skinName="resource/skins/taskCell.exml",e}return __extends(e,t),e.prototype.partAdded=function(e,n){t.prototype.partAdded.call(this,e,n),n==this.receiveBtn&&(this.receiveBtn.visible=!1,n.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onButtonClick,this)),n==this.taskDesc&&(this.taskDesc.text="抓2次娃娃（0/2）"),n==this.taskReward&&(this.taskReward.text="+20"),n==this.taskType&&(this.taskType.text="未达成")
},e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this)},e.prototype.onButtonClick=function(t){switch(t.target){case this.receiveBtn:}},e}(eui.Component);__reflect(TaskCell.prototype,"TaskCell",["eui.UIComponent","egret.DisplayObject"]);var ThemeAdapter=function(){function t(){}return t.prototype.getTheme=function(t,e,n,i){function o(t){e.call(i,t)}function a(e){e.resItem.url==t&&(RES.removeEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,a,null),n.call(i))}RES.addEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,a,null),RES.getResByUrl(t,o,this,RES.ResourceItem.TYPE_TEXT)},t}();__reflect(ThemeAdapter.prototype,"ThemeAdapter",["eui.IThemeAdapter"]);var Data=function(){function t(){}return t}();Data.weChat_name="",Data.weChat_headUrl="",Data.weChat_from="",Data.weChat_openid="",Data.wx_appId="wxdfb3530f672883c1",Data.wx_secret="3703eb5b3f6eb5aa64d82fa553ed90e",Data.userKey="oexAxwoclOGqj-CFIq0NULqlx2xs",Data.wawaJson=null,Data.selectData=null,Data.onWawaIndex=-1,Data.cmd_userInfo=null,Data.cmd_winnig=null,Data.cmd_pictures=null,__reflect(Data.prototype,"Data");var UploadImageTool=function(){function t(){}return t.showChoose=function(e,n,i){void 0===i&&(i=null),t.mCall=e,t.mObj=n,t.loadingFun=i;var o=document.getElementById("fileInput_xy");o&&(document.body.removeChild(o),o=null),o||(o=document.createElement("input"),o.type="file",o.accept="image/*;",o.capture&&(o.capture="capture"),o.style.zIndex="-999",o.style.position="absolute;",o.style.display="none",o.id="fileInput_xy",document.body.appendChild(o)),t.mInit=!0,o.onchange=t.onSelectFile,o.click()},t.onSelectFile=function(e){var n=document.getElementById("fileInput_xy"),i=n.files[0];if(i){var o=i.type;o||(o=t.mime[i.name.match(/\.([^\.]+)$/i)[1]]);var a=t.getUrlOf(i);t.tmpCreateImage(a,i)}},t.getUrlOf=function(t){return void 0!=window.URL?window.URL.createObjectURL(t):window.webkitURL.createObjectURL(t)},t.tmpCreateImage=function(e,n){t.loadingFun&&t.loadingFun();var i=document.createElement("img");i.onload=function(){EXIF.getData(n,function(){var e=EXIF.getTag(n,"Orientation"),o=new egret.RenderTexture,a=new egret.BitmapData(i),r=new egret.Bitmap(a),s=new egret.DisplayObjectContainer;s.addChild(r);var h=e+"",l=a.width,c=a.height,p=Math.min(t.imageSize.y/c,t.imageSize.x/l,1);l*=p,c*=p,r.width=l,r.height=c,l=Math.round(l),c=Math.round(c);var d=new egret.Rectangle(0,0,l,c);switch(h){case"3":r.rotation=180,r.x=l,r.y=c,d.width=l,d.height=c;break;case"6":r.rotation=90,r.x=c,d.width=c,d.height=l;break;case"8":r.rotation=-90,r.y=l,d.width=c,d.height=l}o.drawToTexture(s,d),t.mCall.apply(t.mObj,[o]),t.mCall=null,t.mObj=null,t.loadingFun=null}),document.body.removeChild(i)},i.src=e,i.style.display="none",document.body.appendChild(i)},t}();UploadImageTool.imageSize=new egret.Point(640,1050),UploadImageTool.mime={png:"image/png",jpg:"image/jpeg",jpeg:"image/jpeg",bmp:"image/bmp"},__reflect(UploadImageTool.prototype,"UploadImageTool");var Utils=function(){function t(){}return t.getStageWidth=function(){return egret.Stage.prototype.stageWidth},t.getStageHeight=function(){return egret.Stage.prototype.stageHeight},t.setResult=function(t){this._result=t},t.getResult=function(){return this._result},t.createBitmapByImageName=function(t){var e=new egret.Bitmap,n=RES.getRes(t);return e.texture=n,e},t.createBitmapBySheetName=function(t,e){var n=new egret.Bitmap,i=e.getTexture(t);return n.texture=i,n},t.isWeiXin=function(){var t=navigator.userAgent.toString(),e=t.match(/MicroMessenger/i);return"MicroMessenger"==e?!0:!1},t.isMobile=function(){return egret.Capabilities.isMobile},t.deviceOS=function(){return egret.Capabilities.os},t.getTimeMark=function(){return Date.parse((new Date).toString())/1e3},t.getLocalTime=function(t){return new Date(1e3*parseInt(t)).toLocaleString().replace(/:\d{1,2}$/," ")},t.getRandomStr=function(){return Math.random().toString(36).substr(2,15)},t.isCheckCollide=function(t,e){return t.x>=e.x&&t.x<=e.x+e.width&&t.y>=e.y&&t.y<=e.y+e.height?!0:!1},t.getArgsValue=function(t,e){t=t.replace("/","");var n=function(t,e){var n=t.split("?"),i="";if(n[0]==t)return i;var o=n[1];n=o.split("&");for(var a=0;a<n.length;a++){o=n[a];var r=o.split("=");r.length<=1||r[0]==e&&(i=r[1])}return i};return n(t,e)},t.getCurrHref=function(){return window.location.search},t.getPlatform=function(){var t={versions:function(){var t=navigator.userAgent;navigator.appVersion;return{trident:t.indexOf("Trident")>-1,presto:t.indexOf("Presto")>-1,webKit:t.indexOf("AppleWebKit")>-1,gecko:t.indexOf("Gecko")>-1&&-1==t.indexOf("KHTML"),mobile:!!t.match(/AppleWebKit.*Mobile.*/)||!!t.match(/AppleWebKit/),iOS:!!t.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/),android:t.indexOf("Android")>-1||t.indexOf("Linux")>-1,iPhone:t.indexOf("iPhone")>-1||t.indexOf("Mac")>-1,iPad:t.indexOf("iPad")>-1,webApp:-1==t.indexOf("Safari"),weChat:-1!==t.search(/MicroMessenger/i)}}()};return t},t.getRandNum=function(t){for(var e=Math.floor(Math.random()*t),n=Math.floor(Math.random()*t);e==n;)n=Math.floor(Math.random()*t);return console.log(e,n),[e,n]},t.sendHttpPostServer=function(t,e,n,i){var o=new egret.URLLoader,a=new egret.URLRequest;a.requestHeaders.push(new egret.URLRequestHeader("Content-Type","text")),a.url=t,a.method=egret.URLRequestMethod.POST,a.data=e,o.load(a),o.addEventListener(egret.Event.COMPLETE,n,i)},t.sendHttpServer=function(t,e,n){var i=t;WaitConnect.openConnect();var o=new egret.HttpRequest;o.responseType=egret.HttpResponseType.TEXT,o.open(i,egret.HttpMethod.GET),o.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),o.send(),o.addEventListener(egret.Event.COMPLETE,e,n)},t}();__reflect(Utils.prototype,"Utils");var WaitConnect=function(t){function e(){var e=t.call(this)||this;return e.addEventListener(eui.UIEvent.COMPLETE,e.uiCompHandler,e),e.skinName="resource/skins/waitConnect.exml",e}return __extends(e,t),e.prototype.partAdded=function(e,n){t.prototype.partAdded.call(this,e,n)},e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this)},e.prototype.uiCompHandler=function(){this.visible=!1;var t=this;egret.Tween.get(this,{loop:!1}).wait(100).call(function(){t.visible=!0})},e.openConnect=function(){null==this.wait&&(this.wait=new e,AppCanvas.addChild(this.wait))},e.closeConnect=function(){null!=this.wait&&(this.wait.parent.removeChild(this.wait),this.wait=null)},e}(eui.Component);WaitConnect.wait=null,__reflect(WaitConnect.prototype,"WaitConnect",["eui.UIComponent","egret.DisplayObject"]);var socket=null,WebSocketExample=function(t){function e(){var e=t.call(this)||this;return e.text="TestWebSocket",socket=e,e.initStateText(),e.initWebSocket(),e}return __extends(e,t),e.prototype.initStateText=function(){this.stateText=new egret.TextField,this.stateText.size=22,this.stateText.text=this.text,this.stateText.width=480,this.addChild(this.stateText)},e.prototype.initWebSocket=function(){this.socket=new egret.WebSocket,this.socket.type=egret.WebSocket.TYPE_BINARY,this.socket.addEventListener(egret.ProgressEvent.SOCKET_DATA,this.onReceiveMessage,this),this.socket.addEventListener(egret.Event.CONNECT,this.onSocketOpen,this),this.socket.addEventListener(egret.Event.CLOSE,this.onSocketClose,this),this.socket.addEventListener(egret.IOErrorEvent.IO_ERROR,this.onSocketError,this),this.socket.connect("echo.websocket.org",80)},e.prototype.sendData=function(t){var e=new egret.ByteArray,n=t[0];e.writeUTF("zww"),e.writeUTF(n.commond);var i=n.info;if(i&&i.length>0)for(var o=0;o<i.length;o++){var a=typeof i[o];"number"==a&&e.writeInt(i[o]),"string"==a&&e.writeUTF(i[o]),"boolean"==a&&e.writeBoolean(i[o])}e.writeUTF("end"),e.position=0,this.socket.writeBytes(e,0,e.bytesAvailable)},e.prototype.onSocketOpen=function(){this.trace(">>>>>>>>>>>>>>> WebSocketOpen <<<<<<<<<<<<<<<<<")},e.prototype.onSocketClose=function(){this.trace(">>>>>>>>>>>>>>> WebSocketClose <<<<<<<<<<<<<<<<<")},e.prototype.onSocketError=function(){this.trace(">>>>>>>>>>>>>>> WebSocketError <<<<<<<<<<<<<<<<<")},e.prototype.onReceiveMessage=function(t){var e=new egret.ByteArray;this.socket.readBytes(e),e.position=5;var n=e.readUTF(),i=e.readUTF();"end"==i?this.trace("["+n+"] 指令解析sucess"):this.trace("["+n+"] 指令解析error")},e.prototype.trace=function(t){this.text=this.text+"\n"+t,this.stateText.text=this.text,egret.log(t)},e}(egret.DisplayObjectContainer);__reflect(WebSocketExample.prototype,"WebSocketExample");